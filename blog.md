こんにちは。株式会社VOYAGE GROUP VR LAB室の[@daybysay](https://twitter.com/daybysay) です。

本職はインターネット広告のエンジニアですが、今年の10月にVR LAB室という
VRコンテンツ開発にトライしていく事業室を立ち上げ、ちょこちょことアプリケーション開発をしております。

この度、ご縁がありVR Insideさんに寄稿する機会を頂けたので、自分が勉強してきたことのアウトプットをしたいと思います。

今回はVRに興味はあるがまだ触ったことは無いよ、というエンジニアの方向けに、開発者視点でVRコンテンツ開発と環境についてまとめました。

この記事を読んだ方に、**VRのアプリにはどんな種類があるのか？**、**どんな開発環境があるのか？**、を知って頂き、今後のVRコンテンツ開発に役立てて頂ければ幸いです！

# 目次

[:contents]

# アプリケーション開発が出来るHMDについて

![まとめ](./図.png)

2016年末現在、アプリケーション開発が出来るHMDは下記2つに分類できます。

1. ハイエンドHMD
1. モバイルHMD

また、モバイルHMDの中でもハイエンドとローエンドで分かれています。

## ハイエンドHMD
![image](./images/3.jpg)

ハイエンドHMDは、いわゆる**ゲーミングPC**などの据え置き型の端末とセットで使うHMDで、次のような特徴があります。

良い点
* リフレッシュレートが高いため、ヘッドトラッキングの精度が高い
* ルームスケールに対応しているため、コンテンツ内を歩き回る体験を作り出せる
* ハンドコントローラに対応しているため、VR空間内にユーザの手を再現できる

悪い点
* ゲーミングPCとHMDが必要なため、初期のコストが高い(合わせて20万~)
* ルームスケールのコンテンツを体験する広いスペースを用意するのが大変

3Dお絵かきアプリである TiltBrush や、VR空間で他のユーザと遊べる Toyboxなど、全身を使う動きのあるコンテンツとの相性が良いです。

## モバイルHMD
![image](./images/4.png)

モバイルHMDは、スマホ + HMDで利用できる端末で、ハイエンドHMDに比べるとインタラクションの種類が限定されてしまったり、扱えるポリゴン数が少ないなど、制約がおおいです。しかし、HMDさえ追加購入するだけで体験できるコンテンツを作れますので、体験までのハードルが低いです。

良い点
* 安いHMD + お手持ちのスマホでコンテンツが体験できるので、コンテンツ体験までのハードルが低い(1,000円~)
* 持ち運びが用意なので場所を選ばない
* (モバイルハイエンド) ハイエンドHMDには劣るものの、ユーザの色々な入力を受けるインターフェイスが備わっている
* (モバイルローエンド) 既存のストアを利用してアプリを配布できる

悪い点
* 現状のモバイルHMDだとポジショントラッキングができないので、コンテンツ内での移動に制約がある
* (モバイルローエンド) 多くの場合ハンドコントローラがないので、コンテンツ内のインタフェイスが視線ベースになることが多く、疲れやすい
* (モバイルローエンド) スマホのスペックによって扱えるポリゴン数にかなり差があるので調整が大変

モバイルHMDは場所に関係なく使えるので、例えばNetflixやYoutubeのような動画を見るコンテンツや、リラクゼーション系など、頭だけで使えて動きが少ないコンテンツと相性が良いです。

これらHMDの特性をしっかり把握した上で、どこに対してコンテンツを提供していくか検討をするのが重要です。

### アプリケーションのタイプ
![image](./images/2.png)

VRアプリケーションのタイプは2種類で、**ネイティブアプリケーション**と**Webアプリケーション**があります。

それぞれ下記のような特徴を持っています。

* ネイティブVRアプリケーション
	* WindowsやMacOS、GearVRやDaydreamなどのプラットフォーム経由でアプリケーションをインストールして利用できるネイティブアプリケーション
	* Unity, UE4など、VRコンテンツ開発をサポートする強力なゲームエンジンが存在する
	* Oculus RiftやHTC Viveなどベンダの公式からSDKが提供されている事が多い
	* OSネイティブのAPIを叩けるので出来ることの幅が広い
	* WebVRに比べてリッチで作り込まれた表現がし易いのと、（多くの場合）Wi-Fiか有線が前提なので扱うファイルサイズの制約が少ない

* WebVRアプリケーション
	* Web上にホスティングされ、インストール不要で簡単に体験できるアプリケーション
	* WebVR APIを利用し、HMDの情報を扱える(WebVR APIが使えなくてもVRコンテンツ開発は可能)
	* WebVR APIはHMD本体、HMD用カメラ(ポジショントラッキング)とブラウザの間をつなぐAPIで、Web GL、Web Audio、GamePad APIと組み合わせてアプリケーションを開発する
	* ブラウザベースなのでURLのみでアクセス可能
	* A-Frameなど、ブラウザ上でVRを実現するためのライブラリが存在する

WebVRアプリケーションは、ブラウザベースで動作するVRコンテンツであり、[WebVR API](https://github.com/w3c/webvr) を利用した開発が出来ます。
WebVR APIはHMDとカメラ、現在[W3Cにドラフトが出ている段階](https://w3c.github.io/webvr/)です。

現在では多くのコンテンツがネイティブアプリケーションとして作られていますが、開発環境やブラウザのWebVR API対応によって、今後はWebアプリケーションも増えてくると予想されます。

ブラウザのWebVR API対応状況に関しては [Is WebVR Ready?](https://iswebvrready.org/) で確認が可能です。

これらの特徴をもったVRコンテンツは様々なHMDを利用しており、それぞれのHMDの性質に合わせたコンテンツが開発されています。

コンテンツを開発する上で、**どんな種類のHMDがあるのか？**、また、**どんな特性をもっているのか？**というのはかなり重要なポイントになりますので、そちらを整理したいと思います。


# VRコンテンツ開発環境
![image](./images/6.png)

VRコンテンツの開発環境は、先程お話した**コンテンツのタイプ**により大きく違います。

## ネイティブアプリケーション
ネイティブのVRコンテンツ開発は、多くの場合下記2つのゲームエンジンで行われています。

1. [Unity](https://unity3d.com/jp/)
1. [UNREAL ENGINE4(UE4)](https://www.unrealengine.com/ja/what-is-unreal-engine-4)

ざっくりとした紹介をすると、簡単に使えて情報量が多いUnityと、リアルなグラフィックの作り込みが出来るUE4といった印象です。

それぞれ他にも特性を持っておりますが、特にこだわりがなければ情報が豊富で有料のアセット購入が簡単に出来る**Unity**の利用をお勧めします。

## Webアプリケーション
HTML + CSS + JSでの開発が可能です。お好みのエディタで開発が可能です。ちなみに筆者はVimで開発しています。

## おすすめの開発環境と構築方法
とりあえずVR開発を始めるに当たって、筆者のお勧めは**A-Frame + Google Cardboardを使ったWebVR開発**です。

A-FrameはWebVRアプリケーション開発を支援するため、Mozilla VRチームが中心となって開発しているOSSのライブラリです。

JSでの3Dのコンテンツ開発を可能とする**Three.js**をベースとし、ヘッドトラッキングや両眼立体視を簡単に実現できる機能などが追加されています。

また、Oculus RiftやHTC ViveなどのハイエンドHMDや、ハンドコントローラなども簡単に扱えるようになっており、色々なプラットフォームに対応できるのも魅力の一つです。

<iframe src="https://aframe.io/examples/showcase/helloworld/"></iframe>

A-Frameの使い方に関しては[公式のチュートリアル](https://aframe.io/docs/0.3.0/introduction/getting-started.html)にきれいにまとまっているので、そちらをご参照下さい。

ちなみにA-Frameを用いたアプリ開発環境の構築は[A-Frame Boilerplate](https://github.com/DayBySay/aframe-boilerplate)の利用で簡単に実現できます。

```
$ git clone https://github.com/aframevr/aframe-boilerplate.git
$ cd aframe-boilerplate && rm -rf .git && npm install && npm start
$ open http://localhost:3000/
```

詳しい使い方は[弊社ブログの記事](http://vr-lab.voyagegroup.com/entry/2016/12/15/120544)にございますので、そちらをご参照下さい。

# まとめ
以上、VRコンテンツの種類や特性、開発環境から開発時の注意点まで広く浅く説明させていただきました。

VOYAGE GROUPではVRコンテンツを開発したいエンジニアやクリエイターの方を募集しておりますので、[Twitter](https://twitter.com/daybysay)などでお気軽にお声がけ下さい！

それでは、よいVRコンテンツ開発ライフを！

