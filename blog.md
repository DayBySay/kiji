こんにちは。株式会社VOYAGE GROUP VR LAB室の[@daybysay](https://twitter.com/daybysay) です。

本職はインターネット広告のエンジニアですが、今年の10月にVR LAB室という
VRコンテンツ開発にトライしていく事業室を立ち上げ、ちょこちょことアプリケーション開発をしております。
この度、ご縁がありVR Insideさんに寄稿する機会を頂けたので、自分が勉強してきたことのアウトプットをしたいと思います。

今回はVRに興味はあるがまだ触ったことは無いよ、というエンジニアの方向けに、開発者視点でVRコンテンツ開発と環境についてまとめました。

この記事を読んだ方に、*どんなコンテンツが作れるのか？*と、*どんな開発環境があるのか？*に関してイメージを持って頂き、是非VRコンテンツ開発にトライして頂ければ幸いです！

# 目次

[:contents]

# VRの概要
そもそもVRとは、Virtual Reality(人口現実感)と呼ばれているものです。

VRコンテンツは、多くの場合次のようなコンテンツを指しています。

* HMD(Head Mounted Display)を利用し、写真・動画・3Dのアニメーションなどを主観、あるいは客観で360度体験することが可能な没入型コンテンツ

HMDと呼ばれる自分の視界を覆う端末をかぶることで視界を自由に書き換えることができるため、あたかもコンテンツの中に入ったかのような体験をすることが出来ます。

代表的なHMDとしては、Oculus RiftやPlaystation VRなどがあり、特にPlaystaion VR発売時は国内でも色々話題になっていたと思います。

## どんなVRコンテンツがあるか？

### カテゴリ
現在、世の中に存在するVRコンテンツのカテゴリは、大きく*エンタメ*と*非エンタメ*に分けることが出来ます。

エンタメ領域では、ゲーム・アミューズメント、ライブイベント、ビデオがあり、非エンタメ領域では、医療・ヘルスケア、教育、不動産、小売り、軍事などがあります。

例えばPlaystaion VRでリリースされたサマーレッスンという女子高生の家庭教師が出来る(！)ゲームであったり、期間限定でお台場に登場したVRZONEなどが話題になっていました。

VRZONEは雪山で命がけのスキーをしたり、満員のライブハウスで歌ったり、ガンダムの手のひらの上に乗ったりと、
普段は中々出来ないようなアクティビティを体験できる*VR専用アミューズメント施設*で、平日でも予約が取れないほど人気でした！

非エンタメ領域で話題に上がっていたのは、VRでモデルルームを閲覧できるSUUMOの[スーモスコープ](http://scope.suumo.jp/lp/)や、VR空間内で1,000人規模のイベントを開催できる [cluster.](https://cluster.mu/) などがありました。

### アプリケーションのタイプ
現在公開されているVRコンテンツのアプリケーションのタイプは2種類で、*ネイティブアプリケーション*と*Webアプリケーション*があります。

それぞれ下記のような特徴を持っています。

* ネイティブVRアプリケーション
	* WindowsやMacOS、GearVRやDaydreamなどのプラットフォーム経由でアプリケーションをインストールして利用できるネイティブアプリケーション
	* Unity, UE4など、VRコンテンツ開発をサポートする強力なゲームエンジンが存在する
	* Oculus RiftやHTC Viveなどベンダの公式からSDKが提供されている事が多い
	* OSネイティブのAPIを叩けるので出来ることの幅が広い
	* WebVRに比べてリッチで作り込まれた表現がし易いのと、（多くの場合）Wi-Fiか有線が前提なので扱うファイルサイズの制約が少ない

* WebVRアプリケーション
	* Web上にホスティングされ、インストール不要で簡単に体験できるアプリケーション
	* WebVR APIを利用することで、HMDの情報を扱うことが出来る(WebVR APIが使えなくてもVRコンテンツ開発は可能)
	* WebVR APIはHMD本体、HMD用カメラ(ポジショントラッキング)とブラウザの間をつなぐものであり、Web GL、Web Audio、GamePad APIと組み合わせてアプリケーションを開発する
	* ブラウザベースなのでURLのみでアクセス可能
	* A-Frameなど、ブラウザ上でVRを実現するためのライブラリが存在する

WebVRアプリケーションは、ブラウザベースで動作するVRコンテンツであり、[WebVR API](https://github.com/w3c/webvr) を利用して開発することが出来ます。
WebVR APIはHMDとカメラ、現在[W3Cにドラフトが出ている段階](https://w3c.github.io/webvr/)です。

現在では多くのコンテンツがネイティブアプリケーションとして作られていますが、開発環境やブラウザのWebVR API対応によって、今後はWebアプリケーションも増えてくると予想されます。

ブラウザのWebVR API対応状況に関しては [Is WebVR Ready?](https://iswebvrready.org/) で確認が可能です。

これらの特徴をもったVRコンテンツは様々なHMDを利用しており、それぞれのHMDの性質に合わせたコンテンツが開発されています。

コンテンツを開発する上で、*どんな種類のHMDがあるのか？*、また、*どんな特性をもっているのか？*というのはかなり重要なポイントになりますので、そちらを整理したいと思います。

# 開発に使えるHMDの種別
今回取り扱うHMDを下記の図にまとめました。

![まとめ](./図.png)

現状我々がコンテンツ開発が出来るHMDですが、大きく2つに分けることが出来ます。

1. ハイエンドHMD
1. モバイルHMD

また、モバイルHMDの中でもハイエンドとローエンドで分かれています。

## ハイエンドHMD
ハイエンドHMDは、いわゆる*ゲーミングPC*などの据え置き型の端末とセットで使うHMDで、次のような特徴があります。

良い点
* リフレッシュレートが高いため、ヘッドトラッキングの精度が高い
* ルームスケールに対応しているため、コンテンツ内を歩き回る体験を作り出せる
* ハンドコントローラに対応しているため、VR空間内にユーザの手を再現できる

悪い点
* ゲーミングPCとHMDが必要なため、初期のコストが高い(合わせて20万~)
* ルームスケールのコンテンツを体験する広いスペースを用意するのが大変

3Dお絵かきアプリである TiltBrush や、VR空間で他のユーザと遊べる Toyboxなど、全身を使う動きのあるコンテンツとの相性が良いです。

## モバイルHMD
モバイルHMDは、スマホ + HMDで利用できる端末で、ハイエンドHMDに比べるとインタラクションの種類が限定されてしまったり、扱えるポリゴン数が少ないなど、制約がおおいです。しかし、HMDさえ追加購入するだけで体験できるコンテンツを作ることが出来るので、体験までのハードルが低いです。

良い点
* 安いHMD + お手持ちのスマホでコンテンツが体験できるので、コンテンツ体験までのハードルが低い(1,000円~)
* 持ち運びが用意なので場所を選ばない
* (モバイルハイエンド) ハイエンドHMDには劣るものの、ユーザの色々な入力を受けるインターフェイスが備わっている
* (モバイルローエンド) 既存のストアを利用してアプリを配布できる

悪い点
* 現状のモバイルHMDだとポジショントラッキングができないので、コンテンツ内での移動に制約がある
* (モバイルローエンド) 多くの場合ハンドコントローラがないので、コンテンツ内のインタフェイスが視線ベースになることが多く、疲れやすい
* (モバイルローエンド) スマホのスペックによって扱えるポリゴン数にかなり差があるので調整が大変

モバイルHMDは場所に関係なく使えるので、例えばNetflixやYoutubeのような動画を見るコンテンツや、リラクゼーション系のコンテンツなど、頭だけで使えて動きが少ないものが特に相性が良いです。

これらHMDの特性をしっかり把握した上で、どこに対してコンテンツを提供していくか検討をするのが重要です。

## コンテンツ配信のプラットフォーム
コンテンツ配信方法は、コンテンツの

図に項目がありますが、それぞれアプリの配布のプラットフォームが存在します。
Oculus RiftであればOculus Store、HTC ViveであればSteamVRなど、それぞれ利用できる配信プラットフォームが決まっています。

# VRコンテンツ開発環境
VRコンテンツの開発環境は、先程お話した*コンテンツのタイプ*により大きく違います。

## ネイティブアプリケーション
ネイティブのVRコンテンツ開発は、多くの場合下記2つのゲームエンジンで行われています。

1. [Unity](https://unity3d.com/jp/)
1. [UNREAL ENGINE4(UE4)](https://www.unrealengine.com/ja/what-is-unreal-engine-4)

ざっくりとした紹介をすると、簡単に使えて情報量が多いUnityと、リアルなグラフィックの作り込みが出来るUE4といった印象です。

それぞれ他にも特性を持っておりますが、特にこだわりがなければ情報が豊富で有料のアセット購入が簡単に出来る*Unity*の利用をお勧めします。

## Webアプリケーション


## おすすめの開発環境
とりあえずVR開発を始めるに当たって、筆者のお勧めは*A-Frame + Google Cardboardを使ったWebVR開発*です。

# コンテンツ開発時の注意点
VRコンテンツ開発時に特に注意したいポイントは下記になります。

1. VR酔いを防ぐ設計、実装
1. VR空間に即したインタフェイスを利用する
1. 開発と動作確認のサイクルを回す

## VR酔いについて

## インタフェイスについて

## 開発と動作確認のサイクル

## VRコンテンツ開発時に参照するリソースについて

# まとめ

## VRコンテンツ、環境のまとめ

## VRの楽しさについて

## エンジニア募集
